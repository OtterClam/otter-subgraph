specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: OtterQiLocker
    network: matic
    source:
      address: '0x69f6c4Fa150F9F0b3037612CF8FadDAeDbd46Bb8'
      abi: OtterQiLocker
      startBlock: 26888468 #25352622
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - ProtocolMetric
        - LogRebase
        - Transfer
        - TreasuryRevenue
        - DystopiaGaugeBalance
        - Vote
        - VotePosition
        - GovernanceMetric
        - TotalBurnedClam
        - Harvest
        - HarvestStaking
      abis:
        - name: OtterQiLocker
          file: ./abis/OtterQiLocker.json
        - name: OtterClamERC20V2
          file: ./abis/OtterClamERC20V2.json
        - name: OtterBondStakeDepository
          file: ./abis/OtterBondStakeDepository.json
        - name: OtterStaking
          file: ./abis/OtterStaking.json
        - name: OtterStakingDistributor
          file: './abis/OtterStakingDistributor.json'
        - name: ClamCirculatingSupply
          file: ./abis/ClamCirculatingSupply.json
        - name: xTetuQi
          file: ./abis/xTetuQi.json
        - name: OtterQiDAOInvestment
          file: ./abis/OtterQiDAOInvestment.json
        - name: QiFarm
          file: ./abis/QiFarm.json
        - name: PearlNote
          file: ./abis/PearlNote.json
        - name: OtterPearlERC20
          file: ./abis/OtterPearlERC20.json
        - name: CurveMai3poolContract
          file: ./abis/CurveMai3poolContract.json        
        - name: Dyst
          file: ./abis/Dyst.json      
        - name: veDyst
          file: ./abis/veDyst.json
        - name: PenDystRewards
          file: ./abis/PenDystRewards.json
        - name: PenLockerV2
          file: ./abis/PenLockerV2.json
        - name: PenLens
          file: ./abis/PenLens.json
        - name: PenrosePartnerRewards
          file: ./abis/PenrosePartnerRewards.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: Harvest(uint256)
          handler: handleHarvest
        - event: HarvestStaking(indexed uint256,uint256)
          handler: handleHarvestStaking
      file: ./src/OtterQiLocker.ts
  
  - kind: ethereum/contract
    name: OttoPortal
    network: matic
    source:
      address: '0xF262da77Bc32D4ED026CC4a110b089113651186C'
      abi: OttoPortal
      startBlock: 26102395
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - OttoMinted
      abis:
        - name: OttoPortal
          file: ./abis/OttoPortal.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: OttoMinted(indexed address,indexed address,uint256)
          handler: handleOttoMinted
      file: ./src/OttoPortal.ts
  
  - kind: ethereum/contract
    name: OttopiaStore
    network: matic
    source:
      address: '0xc1b43121e0946adef2ad169d6cb994064e275085'
      abi: OttopiaStore
      startBlock: 27752376
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - BuyProduct
        - Transaction
      abis:
        - name: OttopiaStore
          file: ./abis/OttopiaStore.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: BuyProduct(indexed uint256,indexed address,indexed address,uint256,uint256)
          handler: handleBuyProduct
      file: ./src/OttopiaStore.ts

  # - kind: ethereum/contract
  #   name: Dyst
  #   network: matic
  #   source:
  #     address: '0x39aB6574c289c3Ae4d88500eEc792AB5B947A5Eb'
  #     abi: Dyst
  #     startBlock: 28347518
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.5
  #     language: wasm/assemblyscript
  #     entities:
  #       - Transaction
  #       - Transfer
  #       - TreasuryRevenue
  #     abis:
  #       - name: Dyst
  #         file: ./abis/Dyst.json
  #       #====== getPrice() required contracts======
  #       - name: ERC20
  #         file: ./abis/ERC20.json
  #       - name: UniswapV2Pair
  #         file: ./abis/UniswapV2Pair.json
  #       - name: AggregatorV3InterfaceABI
  #         file: ./abis/AggregatorV3InterfaceABI.json
  #       - name: DystPair
  #         file: ./abis/DystPair.json
  #       - name: DystPairFactory
  #         file: ./abis/DystPairFactory.json
  #       - name: DystRouter
  #         file: ./abis/DystRouter.json
  #       - name: UniswapV2Router02
  #         file: ./abis/UniswapV2Router02.json
  #     eventHandlers:
  #       - event: Transfer(indexed address,indexed address,uint256)
  #         handler: handleDystTransfer
  #     file: ./src/Dyst.ts

  # - kind: ethereum/contract
  #   name: Pen
  #   network: matic
  #   source:
  #     address: '0x39aB6574c289c3Ae4d88500eEc792AB5B947A5Eb'
  #     abi: Pen
  #     startBlock: 28829513
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.5
  #     language: wasm/assemblyscript
  #     entities:
  #       - Transaction
  #       - Transfer
  #       - TreasuryRevenue
  #     abis:
  #       - name: Pen
  #         file: ./abis/Pen.json
  #       #====== getPrice() required contracts======
  #       - name: ERC20
  #         file: ./abis/ERC20.json
  #       - name: UniswapV2Pair
  #         file: ./abis/UniswapV2Pair.json
  #       - name: AggregatorV3InterfaceABI
  #         file: ./abis/AggregatorV3InterfaceABI.json
  #       - name: DystPair
  #         file: ./abis/DystPair.json
  #       - name: DystPairFactory
  #         file: ./abis/DystPairFactory.json
  #       - name: DystRouter
  #         file: ./abis/DystRouter.json
  #       - name: UniswapV2Router02
  #         file: ./abis/UniswapV2Router02.json
  #     eventHandlers:
  #       - event: Transfer(indexed address,indexed address,uint256)
  #         handler: handlePenTransfer
  #     file: ./src/Pen.ts

  - kind: ethereum/contract
    name: PenroseMultiRewards
    network: matic
    source:
      address: '0x4eDc2f4368179BE77E5e8fbA295FfF0A82E3DF21'
      abi: PenroseMultiRewards
      startBlock: 29069971
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - Transfer
        - TreasuryRevenue
      abis:
        - name: PenroseMultiRewards
          file: ./abis/PenroseMultiRewards.json
        - name: Pen
          file: ./abis/Pen.json
        - name: Dyst
          file: ./abis/Dyst.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: RewardPaid(indexed address,indexed address,uint256)
          handler: handleRewardPaid
      file: ./src/PenroseMultiRewards.ts

  - kind: ethereum/contract
    name: PenrosePartnerRewards
    network: matic
    source:
      address: '0x5DD340DD4142D093c1926282CD56B0D4690dEB11'
      abi: PenrosePartnerRewards
      startBlock: 29069971
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - Transfer
        - TreasuryRevenue
      abis:
        - name: PenrosePartnerRewards
          file: ./abis/PenrosePartnerRewards.json
        - name: Pen
          file: ./abis/Pen.json
        - name: Dyst
          file: ./abis/Dyst.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: RewardPaid(indexed address,indexed address,uint256)
          handler: handleRewardPaid
      file: ./src/PenrosePartnerRewards.ts
  
  - kind: ethereum/contract
    name: Qi
    network: matic
    source:
      address: '0x580A84C73811E1839F75d86d75d88cCa0c241fF4'
      abi: Qi
      startBlock: 26888468
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - Transfer
        - TreasuryRevenue
        - TotalBribeReward
      abis:
        - name: Qi
          file: ./abis/Qi.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleQiTransfer
      file: ./src/Qi.ts

  - kind: ethereum/contract
    name: DystPairFactory
    network: matic
    source:
      address: '0x1d21db6cde1b18c7e47b0f7f42f4b3f68b9beec9'
      abi: DystPairFactory
      startBlock: 27986220
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - Transfer
        - DystopiaGaugeBalance
      abis:
        - name: Dyst
          file: ./abis/Dyst.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: PairCreated(indexed address,indexed address,bool,address,uint256)
          handler: handlePairCreated
      file: ./src/DystPairFactory.ts

  - kind: ethereum/contract
    name: OtterRewardManager
    network: matic
    source:
      address: '0x306a7c1347F38CAD360a3A31FE0308c33e92c087'
      abi: OtterRewardManager
      startBlock: 30712813
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - PearlBankMetric
      abis:
        - name: OtterRewardManager
          file: ./abis/OtterRewardManager.json
        - name: PearlBank
          file: ./abis/PearlBank.json
        - name: OtterClamERC20V2
          file: ./abis/OtterClamERC20V2.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: Payout(uint256)
          handler: handlePayout
      file: ./src/OtterRewardManager.ts

  - kind: ethereum/contract
    name: PearlBank
    network: matic
    source:
      address: '0x8787a18F2fcCb87710975CCF71cE931182a505ad'
      abi: PearlBank
      startBlock: 30712813
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - PearlBankMetric
      abis:
        - name: PearlBank
          file: ./abis/PearlBank.json
        - name: OtterClamERC20V2
          file: ./abis/OtterClamERC20V2.json
        - name: ClamPlus
          file: ./abis/ClamPlus.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: Stake(indexed address,uint256,uint256)
          handler: handleStake
        - event: Withdraw(indexed address,uint256,uint256)
          handler: handleWithdraw
      file: ./src/PearlBank.ts

  - kind: ethereum/contract
    name: ClamPond
    network: matic
    source:
      address: '0xF262da77Bc32D4ED026CC4a110b089113651186C'
      abi: ClamPond
      startBlock: 30712813
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - PearlBankMetric
      abis:
        - name: ClamPond
          file: ./abis/ClamPond.json
        - name: PearlBank
          file: ./abis/PearlBank.json
        - name: OtterClamERC20V2
          file: ./abis/OtterClamERC20V2.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: Deposit(address,uint256)
          handler: handleDeposit
        - event: Withdraw(address,uint256)
          handler: handleWithdraw
      file: ./src/ClamPond.ts

templates: 
  - kind: ethereum/contract
    name: DystPair
    network: matic
    source:
      abi: DystPair
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Transaction
        - Transfer
        - DystopiaGaugeBalance
      abis:
        - name: Dyst
          file: ./abis/Dyst.json
        #====== getPrice() required contracts======
        - name: ERC20
          file: ./abis/ERC20.json
        - name: UniswapV2Pair
          file: ./abis/UniswapV2Pair.json
        - name: AggregatorV3InterfaceABI
          file: ./abis/AggregatorV3InterfaceABI.json
        - name: DystPair
          file: ./abis/DystPair.json
        - name: DystPairFactory
          file: ./abis/DystPairFactory.json
        - name: DystRouter
          file: ./abis/DystRouter.json
        - name: UniswapV2Router02
          file: ./abis/UniswapV2Router02.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/DystPair.ts